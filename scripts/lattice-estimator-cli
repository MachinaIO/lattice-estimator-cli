#!/usr/bin/env bash
set -euo pipefail

# This wrapper ensures the local repository's estimator/ submodule is on PYTHONPATH
# and runs the CLI with Sage's Python so that 'sage' modules are available.

# Resolve repository root (this script is expected at REPO_ROOT/scripts/lattice-estimator-cli)
SCRIPT_DIR="$(cd -- "$(dirname -- "${BASH_SOURCE[0]}")" >/dev/null 2>&1 && pwd)"
REPO_ROOT="${SCRIPT_DIR%/*}"

export PYTHONPATH="${REPO_ROOT}${PYTHONPATH:+:${PYTHONPATH}}"

exec sage -python -m lattice_cli "$@"
